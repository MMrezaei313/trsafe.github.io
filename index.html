<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mousa Trading</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: Tahoma, sans-serif;
        }
        
        body {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }
        
        .login-container {
            max-width: 400px;
            margin: 50px auto;
            background: white;
            padding: 30px;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
        }
        
        .login-box h2 {
            text-align: center;
            margin-bottom: 20px;
            color: #1e3a8a;
        }
        
        .form-group {
            margin-bottom: 15px;
        }
        
        .form-group label {
            display: block;
            margin-bottom: 5px;
            font-weight: bold;
        }
        
        .form-control {
            width: 100%;
            padding: 10px;
            border: 2px solid #ddd;
            border-radius: 8px;
            font-size: 16px;
        }
        
        .btn {
            width: 100%;
            padding: 12px;
            background: #3b82f6;
            color: white;
            border: none;
            border-radius: 8px;
            font-size: 16px;
            cursor: pointer;
            margin-top: 10px;
        }
        
        .btn:hover {
            background: #2563eb;
        }
        
        .main-app {
            display: none;
            background: white;
            border-radius: 15px;
            overflow: hidden;
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
        }
        
        .container {
            display: flex;
            min-height: 80vh;
        }
        
        .sidebar {
            width: 250px;
            background: #1f2937;
            color: white;
            padding: 20px;
        }
        
        .main-content {
            flex: 1;
            padding: 20px;
            overflow-y: auto;
        }
        
        .menu-item {
            padding: 10px;
            margin: 5px 0;
            cursor: pointer;
            border-radius: 5px;
        }
        
        .menu-item:hover, .menu-item.active {
            background: #374151;
        }
        
        .tab-content {
            display: none;
        }
        
        .tab-content.active {
            display: block;
        }
        
        .price-display {
            background: #f8fafc;
            padding: 15px;
            border-radius: 10px;
            margin: 10px 0;
            text-align: center;
            border: 2px solid #e5e7eb;
        }
        
        .current-price {
            font-size: 24px;
            font-weight: bold;
            color: #3b82f6;
        }
        
        .form-step {
            margin: 20px 0;
        }
        
        .calculation-results {
            background: #f8fafc;
            padding: 15px;
            border-radius: 10px;
            margin: 15px 0;
        }
        
        .profit { color: #10b981; }
        .loss { color: #ef4444; }
    </style>
</head>
<body>
    <!-- صفحه لاگین -->
    <div class="login-container" id="loginPage">
        <div class="login-box">
            <h2>Mousa Trading Advisor</h2>
            <form id="loginForm">
                <div class="form-group">
                    <label>نام کاربری</label>
                    <input type="text" id="username" class="form-control" required>
                </div>
                <div class="form-group">
                    <label>رمز عبور</label>
                    <input type="password" id="password" class="form-control" required>
                </div>
                <button type="submit" class="btn">ورود به سیستم</button>
            </form>
            <div style="margin-top: 15px; font-size: 12px; text-align: center;">
                <strong>اطلاعات تست:</strong><br>
                ادمین: admin / mousa123<br>
                کاربر: user / trade2024
            </div>
        </div>
    </div>

    <!-- برنامه اصلی -->
    <div class="main-app" id="mainApp">
        <div class="container">
            <!-- نوار کناری -->
            <div class="sidebar">
                <h3>Mousa System</h3>
                <div class="menu-item active" onclick="showTab('tab-analysis')">تحلیل بازار</div>
                <div class="menu-item" onclick="showTab('tab-admin')">پنل مدیریت</div>
                <div class="menu-item" onclick="logout()">خروج</div>
            </div>

            <!-- محتوای اصلی -->
            <div class="main-content">
                <!-- تب تحلیل بازار -->
                <div class="tab-content active" id="tab-analysis">
                    <h2>تحلیل هوشمند بازار</h2>
                    
                    <div class="form-step">
                        <h4>انتخاب بازار و نماد</h4>
                        <select id="marketSelect" class="form-control" onchange="updateSymbols()">
                            <option value="">انتخاب بازار</option>
                            <option value="crypto">ارز دیجیتال</option>
                            <option value="forex">فارکس</option>
                            <option value="stock">بورس تهران</option>
                        </select>
                        
                        <select id="symbolSelect" class="form-control" onchange="showPrice()" style="margin-top: 10px;">
                            <option value="">انتخاب نماد</option>
                        </select>
                        
                        <div id="priceDisplay" class="price-display" style="display: none;">
                            <div class="current-price" id="currentPrice">-</div>
                            <div id="priceChange">-</div>
                        </div>
                    </div>

                    <div class="form-step">
                        <h4>تنظیمات معامله</h4>
                        <input type="number" id="investmentAmount" class="form-control" placeholder="مقدار سرمایه (دلار)" min="10">
                        
                        <div style="margin: 10px 0;">
                            <label>نوع پوزیشن:</label>
                            <select id="positionType" class="form-control" onchange="calculateProfit()">
                                <option value="long">لانگ (خرید)</option>
                                <option value="short">شورت (فروش)</option>
                            </select>
                        </div>
                        
                        <div>
                            <label>اهرم: <span id="leverageValue">1x</span></label>
                            <input type="range" id="leverageSlider" class="form-control" min="1" max="20" value="1" oninput="updateLeverage()">
                        </div>
                    </div>

                    <div class="calculation-results">
                        <h4>محاسبات سود/ضرر</h4>
                        <div>سرمایه اولیه: <span id="initialInvestment">-</span></div>
                        <div>سرمایه با اهرم: <span id="leveragedInvestment">-</span></div>
                        <div>سود احتمالی: <span id="potentialProfit" class="profit">-</span></div>
                        <div>ضرر احتمالی: <span id="potentialLoss" class="loss">-</span></div>
                    </div>

                    <button class="btn" onclick="runAnalysis()">اجرای تحلیل پیشرفته</button>

                    <div id="analysisResults" style="margin-top: 20px; display: none;">
                        <h4>نتایج تحلیل</h4>
                        <div id="resultsContent"></div>
                    </div>
                </div>

                <!-- تب مدیریت -->
                <div class="tab-content" id="tab-admin">
                    <h2>پنل مدیریت سیستم</h2>
                    <div>این بخش فقط برای مدیران سیستم قابل دسترسی است</div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // داده‌های نمادها
        const symbolsData = {
            crypto: ['BTC/USDT', 'ETH/USDT', 'BNB/USDT', 'ADA/USDT'],
            forex: ['EUR/USD', 'GBP/USD', 'USD/JPY', 'XAU/USD'],
            stock: ['شپنا', 'فملی', 'خودرو', 'فولاد']
        };

        // داده‌های قیمت
        const priceData = {
            'BTC/USDT': { price: 52340, change: 2.5 },
            'ETH/USDT': { price: 2850, change: 1.8 },
            'BNB/USDT': { price: 350, change: 0.7 },
            'ADA/USDT': { price: 0.45, change: -1.2 },
            'EUR/USD': { price: 1.0850, change: 0.3 },
            'GBP/USD': { price: 1.2650, change: -0.2 },
            'USD/JPY': { price: 150.20, change: 0.5 },
            'XAU/USD': { price: 2150, change: 0.8 },
            'شپنا': { price: 18500, change: 1.2 },
            'فملی': { price: 32000, change: -0.5 },
            'خودرو': { price: 15000, change: 2.1 },
            'فولاد': { price: 12000, change: 0.3 }
        };

        // مدیریت لاگین
        document.getElementById('loginForm').addEventListener('submit', function(e) {
            e.preventDefault();
            const username = document.getElementById('username').value;
            const password = document.getElementById('password').value;
            
            if ((username === "admin" && password === "mousa123") || 
                (username === "user" && password === "trade2024")) {
                document.getElementById('loginPage').style.display = 'none';
                document.getElementById('mainApp').style.display = 'block';
            } else {
                alert('نام کاربری یا رمز عبور اشتباه است!');
            }
        });

        // نمایش تب‌ها
        function showTab(tabId) {
            document.querySelectorAll('.tab-content').forEach(tab => {
                tab.classList.remove('active');
            });
            document.querySelectorAll('.menu-item').forEach(item => {
                item.classList.remove('active');
            });
            
            document.getElementById(tabId).classList.add('active');
            event.target.classList.add('active');
        }

        // خروج
        function logout() {
            document.getElementById('loginPage').style.display = 'block';
            document.getElementById('mainApp').style.display = 'none';
            document.getElementById('username').value = '';
            document.getElementById('password').value = '';
        }

        // بروزرسانی لیست نمادها
        function updateSymbols() {
            const market = document.getElementById('marketSelect').value;
            const symbolSelect = document.getElementById('symbolSelect');
            
            symbolSelect.innerHTML = '<option value="">انتخاب نماد</option>';
            
            if (market && symbolsData[market]) {
                symbolsData[market].forEach(symbol => {
                    const option = document.createElement('option');
                    option.value = symbol;
                    option.textContent = symbol;
                    symbolSelect.appendChild(option);
                });
            }
            
            document.getElementById('priceDisplay').style.display = 'none';
        }

        // نمایش قیمت
        function showPrice() {
            const symbol = document.getElementById('symbolSelect').value;
            const priceDisplay = document.getElementById('priceDisplay');
            const currentPrice = document.getElementById('currentPrice');
            const priceChange = document.getElementById('priceChange');
            
            if (symbol && priceData[symbol]) {
                const data = priceData[symbol];
                currentPrice.textContent = `$${data.price.toLocaleString()}`;
                
                const changeClass = data.change >= 0 ? 'profit' : 'loss';
                const changeSign = data.change >= 0 ? '+' : '';
                priceChange.innerHTML = `<span class="${changeClass}">${changeSign}${data.change}%</span>`;
                
                priceDisplay.style.display = 'block';
                calculateProfit();
            }
        }

        // بروزرسانی اهرم
        function updateLeverage() {
            const leverage = document.getElementById('leverageSlider').value;
            document.getElementById('leverageValue').textContent = leverage + 'x';
            calculateProfit();
        }

        // محاسبه سود/ضرر
        function calculateProfit() {
            const amount = parseFloat(document.getElementById('investmentAmount').value);
            const symbol = document.getElementById('symbolSelect').value;
            const leverage = parseInt(document.getElementById('leverageSlider').value);
            const positionType = document.getElementById('positionType').value;
            
            if (!amount || !symbol || !priceData[symbol]) return;
            
            const data = priceData[symbol];
            const leveragedAmount = amount * leverage;
            
            let profitPercentage, lossPercentage;
            
            if (positionType === 'long') {
                profitPercentage = data.change > 0 ? data.change * leverage : 0;
                lossPercentage = data.change < 0 ? Math.abs(data.change) * leverage : 5; // حداقل 5% ضرر
            } else {
                profitPercentage = data.change < 0 ? Math.abs(data.change) * leverage : 0;
                lossPercentage = data.change > 0 ? data.change * leverage : 5;
            }
            
            document.getElementById('initialInvestment').textContent = `$${amount}`;
            document.getElementById('leveragedInvestment').textContent = `$${leveragedAmount}`;
            document.getElementById('potentialProfit').textContent = `+$${(amount * profitPercentage / 100).toFixed(2)} (${profitPercentage.toFixed(1)}%)`;
            document.getElementById('potentialLoss').textContent = `-$${(amount * lossPercentage / 100).toFixed(2)} (${lossPercentage.toFixed(1)}%)`;
        }

        // اجرای تحلیل
        function runAnalysis() {
            const symbol = document.getElementById('symbolSelect').value;
            const amount = document.getElementById('investmentAmount').value;
            const leverage = document.getElementById('leverageSlider').value;
            const positionType = document.getElementById('positionType').value;
            
            if (!symbol || !amount) {
                alert('لطفا بازار، نماد و مقدار سرمایه را انتخاب کنید');
                return;
            }
            
            const resultsContent = document.getElementById('resultsContent');
            const analysisResults = document.getElementById('analysisResults');
            
            const probability = Math.floor(Math.random() * 30) + 65;
            const decision = probability >= 70 ? 'خرید' : probability >= 60 ? 'نگهداری' : 'فروش';
            
            resultsContent.innerHTML = `
                <div style="background: #f0f9ff; padding: 15px; border-radius: 10px; margin: 10px 0;">
                    <h4>نماد: ${symbol}</h4>
                    <p>احتمال موفقیت: <strong>${probability}%</strong></p>
                    <p>توصیه: <strong>${decision}</strong></p>
                    <p>سطح ریسک: ${leverage > 10 ? 'بالا' : leverage > 5 ? 'متوسط' : 'پایین'}</p>
                </div>
                <div style="background: #fef3c7; padding: 15px; border-radius: 10px; margin: 10px 0;">
                    <strong>هشدار ریسک:</strong> این تحلیل صرفاً جنبه آموزشی دارد و توصیه مالی محسوب نمی‌شود.
                </div>
            `;
            
            analysisResults.style.display = 'block';
            
            // اسکرول به نتایج
            analysisResults.scrollIntoView({ behavior: 'smooth' });
        }

        // محاسبه خودکار هنگام تغییر مقادیر
        document.getElementById('investmentAmount').addEventListener('input', calculateProfit);
        document.getElementById('positionType').addEventListener('change', calculateProfit);
    </script>
</body>
</html>
